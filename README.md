## 계좌 관리 시스템
### 개요
계좌 관리 시스템은 사용자와 계좌의 정보를 가지고 있다.

외부에서 거래 요청이 들어오면 거래 정보를 받아서 

계좌에서 잔액을 거래 금액 만큼 줄이거나(결제) 거래 금액만큼 늘리는(결제 취소) 거래 관리 기능을 제공한다.

### 기술 스택
- Java 11
- Spring boot 2.7.6
- Gradle
- H2 Database
- JPA
- Junit5
- Redis
- Mockito

### 주요 기능
[ 계좌 관련 기능 ]
1. 계좌 생성

사용자가 없는 경우나 계좌가 10개(사용자당 최대 보유 가능 계좌)인 경우 실패 응답

성공시 사용자 아이디, 생성된 계좌 번호(10자리 랜덤 숫자), 등록일시를 반환한다.

2. 계좌 해지

사용자가 없는 경우, 계좌번호가 없는 경우, 사용자 아이디와 계좌 소유주가 다른 경우, 계좌가 이미 해지 상태인 경우, 잔액이 있는 경우 실패 응답

성공 시 사용자 아이디, 계좌번호, 해지일시를 반환한다.

3. 계좌 확인

사용자가 없는 경우 실패 응답
성공 시 사용중인 계좌만 계좌번호, 잔액 정보를 Json list 형식으로 응답한다.

[ 거래 관련 기능 ]
1. 잔액 사용

사용자가 없는 경우, 사용자 아이디와 계좌 소유주가 다른 경우, 계좌가 이미 해지 상태인 경우, 거래 금액이 잔액보다 큰 경우, 거래 금액이 너무 작거나 큰 경우 실패 응답

해당 계좌에서 거래가 진행 중일 때 다른 거래 요청이 오는 경우 해당 거래가 동시에 잘못 처리되는 것을 방지한다.

성공 시 계좌번호, 거래 결과 코드(성공/실패), 거래 아이디, 거래 금액, 거래 일시를 반환한다.

2. 잔액 사용 취소

거래 아이디에 해당하는 거래가 없는 경우, 계좌가 없는 경우, 거래와 계좌가 일치하지 않는 경우, 원거래 금액과 취소 금액이 다른 경우(부분 취소 불가능) 실패 응답

1년이 넘은 거래는 사용 취소 불가능

해당 계좌에서 거래가 진행 중일 때 다른 거래 요청이 오는 경우 해당 거래가 동시에 잘못 처리되는 것을 방지

성공 시 계좌번호, 거래 결과 코드(성공/실패), 거래 아이디, 거래금액, 거래일시를 반환한다.

3. 잔액 사용 확인

해당 거래 아이디가 없는 경우 실패 응답

성공 시 계좌번호, 거래 종류(잔액 사용, 잔액 사용 취소), 거래 결과 코드(성공/실패), 거래 아이디, 거래 금액, 거래 일시를 반환한다.
